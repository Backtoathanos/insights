import"./BaseLayout.astro_astro_type_script_index_0_lang.Ew17R0gt.js";import"https://code.jquery.com/jquery-3.6.0.min.js";import"./MobileNavDropdown.astro_astro_type_script_index_0_lang.CV5_KfF_.js";import"./_commonjsHelpers.BosuxZz1.js";document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".selected-flag"),t=document.querySelector(".country-list"),n=document.querySelector(".selected-code"),a=document.querySelector(".selected-flag .flag");document.querySelector(".selected-country");const o=document.querySelector(".country-search"),r=document.querySelector(".fnumber"),s=document.getElementById("country");function l(e){const o=e.getAttribute("data-dial-code"),l=e.getAttribute("data-country-code"),c=e.querySelector(".country-name").textContent;document.getElementById("country_code").value=c,document.getElementById("phone_code").value=o;const i=Array.from(s.options).find((e=>e.value.toLowerCase()===l.toLowerCase()));i&&(i.selected=!0),n.textContent="+"+o,a.style.backgroundImage=`url('https://flagcdn.com/w40/${l}.png')`,t.style.display="none",r.value&&!r.value.startsWith("+")&&(r.value="+"+o+" "+r.value)}e.addEventListener("click",(function(e){e.stopPropagation(),t.style.display="block"===t.style.display?"none":"block","block"===t.style.display&&o.focus()})),document.querySelectorAll(".country:not(.search-box)").forEach((function(e){e.addEventListener("click",(function(){l(e)}))})),o.addEventListener("input",(function(){const e=this.value.toLowerCase();document.querySelectorAll(".country:not(.search-box)").forEach((t=>{t.querySelector(".country-name").textContent.toLowerCase().includes(e)?t.style.display="flex":t.style.display="none"}))}));let c=null;function i(){navigator.geolocation?navigator.geolocation.getCurrentPosition((async e=>{const t=await async function(e,t){try{return(await(await fetch(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${e}&longitude=${t}&localityLanguage=en`)).json()).countryCode}catch(e){return console.error("Error fetching country code:",e),null}}(e.coords.latitude,e.coords.longitude);t?function(e){const t=Array.from(document.querySelectorAll(".country")).find((t=>t.getAttribute("data-country-code").toLowerCase()===e.toLowerCase()));t&&l(t)}(t):d()}),(e=>{console.error("Geolocation error:",e),d()})):(console.log("Geolocation is not supported by this browser."),d())}function d(){const e=document.querySelector('[data-country-code="us"]');e&&l(e)}r.addEventListener("input",(function(e){const t=this.value.trim();if(t.startsWith("+")){const e=t.match(/^\+\d+/)?.[0];if(e){const n=e.substring(1),a=Array.from(document.querySelectorAll(".country")).find((e=>e.getAttribute("data-dial-code")===n));a&&(l(a),this.value=e+(t.length>e.length?t.substring(e.length):""),c=null)}}else if(t.length>0&&!t.startsWith("+")){const e=Array.from(document.querySelectorAll(".country")).filter((e=>e.querySelector(".country-name").textContent.toLowerCase().startsWith(t.toLowerCase())));if(e.length>0){if(1===e.length||c&&c.countryName.toLowerCase().startsWith(t.toLowerCase())){const n=1===e.length?e[0]:c.element,a=n.querySelector(".country-name").textContent,o=n.getAttribute("data-dial-code");this.value=a;const r=t.length;this.setSelectionRange(r,a.length),l(n),c={element:n,countryName:a,dialCode:o},t.toLowerCase()===a.toLowerCase()&&setTimeout((()=>{this.value=`+${o} `,c=null}),0)}}else c=null}else c=null})),r.addEventListener("keydown",(function(e){c&&this.value.toLowerCase()===c.countryName.toLowerCase()&&([8,46,9,13].includes(e.keyCode)||(e.preventDefault(),this.value=`+${c.dialCode} `,c=null))})),document.addEventListener("click",(function(e){e.target.closest(".flag-dropdown")||(t.style.display="none")})),i(),window.addEventListener("DOMContentLoaded",i);let u=[];!async function(){try{u=(await(await fetch("/blacklisted-domains.json")).json()).domains}catch(e){console.error("Failed to load blacklisted domains",e),u=["gmail.com","yahoo.com","hotmail.com"]}}();const m=/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,p={form:document.getElementById("contact-form-contact"),fname:document.querySelector(".fname"),company_name:document.querySelector(".company_name"),fnumber:document.querySelector(".fnumber"),email:document.querySelector(".email"),phone_code:document.getElementById(".country_code"),country_code:document.getElementById(".phone_code"),area_interests:document.querySelector(".area_interests"),message:document.querySelector(".message"),submitBtn:document.getElementById("submits"),loader:document.getElementById("loader"),popup:document.getElementById("popupfooter"),popupContent:document.querySelector("#popupfooter .relative")};const y=e=>{const t=e.value.trim();return t?t.length<2?{isValid:!1,message:"Name must be at least 2 characters"}:/[0-9]/.test(t)?{isValid:!1,message:"Name cannot contain numbers"}:{isValid:!0}:{isValid:!1,message:"Please enter your name"}},g=e=>{const t=e.value.trim();return t?t.length<2?{isValid:!1,message:"Company name must be at least 2 characters"}:{isValid:!0}:{isValid:!1,message:"Please enter your company name"}},h=e=>e.value.trim()?{isValid:!0}:{isValid:!1,message:"Please enter your phone number"},f=e=>{const t=e.value.trim();return t?m.test(t)?{isValid:!0}:{isValid:!1,message:"Please enter a valid email address"}:{isValid:!1,message:"Please enter your email"}},v=e=>e.value.trim()?{isValid:!0}:{isValid:!1,message:"Please select your country"},b=e=>{const t=e.value.trim();return t&&"Select"!==t?{isValid:!0}:{isValid:!1,message:"Please select an area of interest"}},w={isValidEmail:e=>m.test(e),clearError:e=>{const t=e.nextElementSibling;t?.classList.contains("alert-badge")&&t.remove()},showError:(e,t)=>{w.clearError(e);const n=document.createElement("p");n.className="alert-badge text-red-500 text-sm mt-1",n.textContent=t,e.after(n)},validateField:(e,t)=>{const n=t(e);return n.isValid?(w.clearError(e),!0):(w.showError(e,n.message),!1)},toggleLoader:e=>{p.loader.style.display=e?"block":"none",p.submitBtn.style.display=e?"none":"block",p.submitBtn.disabled=e}},E={getFormData:()=>({fname:p.fname.value.trim(),company_name:p.company_name.value.trim(),fnumber:p.fnumber.value.trim(),email:p.email.value.trim(),phone_code:document.getElementById("phone_code").value.trim(),country_code:document.getElementById("country_code").value.trim(),area_interests:p.area_interests.value.trim(),message:p.message.value.trim(),apage:"Contact Us",apageurl:window.location.href}),validateForm:()=>{let e=!0;return document.querySelectorAll(".alert-badge").forEach((e=>e.remove())),e=w.validateField(p.fname,y)&&e,e=w.validateField(p.company_name,g)&&e,e=w.validateField(p.fnumber,h)&&e,e=w.validateField(p.email,f)&&e,e=w.validateField(document.getElementById("country"),v)&&e,e=w.validateField(p.area_interests,b)&&e,0===grecaptcha.getResponse().length&&(w.showError(document.querySelector(".g-recaptcha"),"Please verify that you are not a robot"),e=!1),e},showPopup:(e,t="")=>{let n="";n="success"===e?'\n                <div class="p-4 md:p-8 text-center">\n                        <dotlottie-player\n                           src="https://lottie.host/607d85f3-ec2f-4bd8-a0e9-44d33551bc66/s8ISauyM7b.lottie"\n                           background="transparent"\n                           speed="1"\n                           style="width: 240px; height: 240px; margin: auto;"\n                           loop\n                           autoplay\n                        ></dotlottie-player>\n                         <h3 class="text-xl md:text-2xl font-bold text-gray-900">Thank you for getting in touch!</h3>\n                                <p class="mt-2 text-gray-600 text-sm md:text-base">\n                                    One of our representatives will contact you within 24 hours.\n                                    If your inquiry is urgent, please call us at \n                                    <strong>+1 (917) 993 7467</strong>.\n                                </p>\n                                <p class="mt-4 text-gray-600 text-sm md:text-base">Have a great day!</p>\n\n                        <button id="close-popup" class="mt-6 w-full md:w-auto px-6 py-2 rounded bg-pink-700 text-white">\n                            Close\n                        </button>\n                    </div>\n              ':`\n                <div class="p-4 md:p-8 text-center">\n                  <h3 class="text-xl md:text-2xl font-bold text-red-600">Oops! Something went wrong.</h3>\n                  <p class="mt-2 text-gray-600 text-sm md:text-base">${t}</p>\n                  <button id="close-popup" class="mt-6 w-full md:w-auto px-6 py-2 rounded bg-gray-700 text-white">\n                    Close\n                  </button>\n                </div>\n              `,p.popupContent.innerHTML=n,p.popup.classList.remove("hidden"),document.getElementById("close-popup").addEventListener("click",(()=>{p.popup.classList.add("hidden")}))},submitForm:async e=>{try{w.toggleLoader(!0);const t=new FormData;t.append("fname",e.fname),t.append("company_name",e.company_name),t.append("fnumber",e.fnumber),t.append("email",e.email),t.append("phone_code",e.phone_code),t.append("country_code",e.country_code),t.append("area_interests",e.area_interests),t.append("message",e.message),t.append("apage",e.apage),t.append("apageurl",e.apageurl);const n=await fetch("https://adminapi.blackridgeresearch.com/contact/add",{method:"POST",body:t});if(!n.ok){const e=await n.json();throw new Error(e.message||"Server responded with an error")}E.showPopup("success"),p.form.reset()}catch(e){console.error("Form submission error:",e),E.showPopup("error",e.message||"Failed to submit form. Please try again.")}finally{w.toggleLoader(!1),grecaptcha.reset()}},handleSubmit:e=>{if(e.preventDefault(),E.validateForm()){const e=E.getFormData();E.submitForm(e)}else{const e=document.querySelector(".alert-badge");e&&e.scrollIntoView({behavior:"smooth",block:"center"})}}};p.fname.addEventListener("input",(function(e){this.value=this.value.replace(/[^a-zA-Z\s\-\.']/g,"")})),p.company_name.addEventListener("input",(function(e){this.value=this.value.replace(/[^a-zA-Z0-9\s\-\.&,@]/g,"")})),p.fnumber.addEventListener("input",(function(e){this.value=this.value.replace(/[^0-9\+\-]/g,"")})),p.message.addEventListener("input",(function(e){this.value=this.value.replace(/[^a-zA-Z0-9\s\-\.&,@]/g,"")})),p.form.addEventListener("submit",E.handleSubmit),p.fname.addEventListener("blur",(()=>w.validateField(p.fname,y))),p.company_name.addEventListener("blur",(()=>w.validateField(p.company_name,g))),p.fnumber.addEventListener("blur",(()=>w.validateField(p.fnumber,h))),p.email.addEventListener("blur",(()=>w.validateField(p.email,f))),document.getElementById("country").addEventListener("change",(()=>w.validateField(document.getElementById("country"),v))),p.area_interests.addEventListener("change",(()=>w.validateField(p.area_interests,b)))}));