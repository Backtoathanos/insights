class l{accordion;type;items;constructor(t,s){this.accordion=t,this.type=t.dataset.type||"single",this.items=this.accordion.querySelectorAll(".solar-accordion-item"),this.init(s)}init(t){const s=this.accordion.dataset.value;this.accordion.dataset.controlElementClass,this.items.forEach((e,o)=>{const r=e.querySelector(".solar-accordion-content"),i=e.querySelector(".solar-accordion-trigger");!r&&i&&i.getElementsByTagName("svg")[0].classList.add("hidden"),!(!r||!i)&&(this.setupAccessibility(i,r,t,o),this.setContentHeight(r),i.addEventListener("click",n=>this.handleClick(n)),i.addEventListener("keydown",n=>this.handleKeyDown(n)),s&&e.getAttribute("data-value")===s&&this.setItemState(e,!0))})}setupAccessibility(t,s,e,o){const r=`solar-accordion${e}-t${o}`,i=`solar-accordion${e}-c${o}`;t.id=r,t.setAttribute("aria-controls",i),t.setAttribute("aria-expanded","false"),s.id=i,s.setAttribute("aria-labelledby",r),s.setAttribute("role","region")}setContentHeight(t){if(!t||!t.firstElementChild)return;const s=t.firstElementChild;if(s){const e=s.getBoundingClientRect().height;t.style.setProperty("--solar-accordion-content-height",`${e}px`)}}handleClick(t){const e=t.currentTarget.closest(".solar-accordion-item");e&&this.toggleItem(e)}handleKeyDown(t){const e=t.currentTarget.closest(".solar-accordion-item");if(!e)return;const o=Array.from(this.accordion.querySelectorAll(".solar-accordion-item")),r=o.indexOf(e),n={ArrowDown:()=>this.focusItem(o,r+1),ArrowUp:()=>this.focusItem(o,r-1),Home:()=>this.focusItem(o,0),End:()=>this.focusItem(o,o.length-1)}[t.key];n&&(t.preventDefault(),n())}focusItem(t,s){const e=(s+t.length)%t.length;t[e].querySelector(".solar-accordion-trigger")?.focus()}toggleItem(t){const s=t.getAttribute("data-state")==="open";this.type==="single"&&this.accordion.querySelectorAll(".solar-accordion-item").forEach(e=>{e!==t&&e.getAttribute("data-state")==="open"&&this.setItemState(e,!1)}),this.setItemState(t,!s)}setItemState(t,s){const e=s?"open":"closed",o=t.querySelector(".solar-accordion-content"),r=t.querySelector(".solar-accordion-trigger");!o||!r||(this.setContentHeight(o),t.setAttribute("data-state",e),o.setAttribute("data-state",e),r.setAttribute("data-state",e),r.setAttribute("aria-expanded",s.toString()))}toggleAll(t){this.items.forEach(s=>{this.setItemState(s,t)})}}const a=()=>{document.querySelectorAll(".solar-accordion").forEach((c,t)=>{const s=new l(c,t),e=c.getAttribute("data-control-element-class");if(e){const o=document.querySelector(`.${e}`);o&&(o.setAttribute("data-state","closed"),o.addEventListener("click",()=>{const r=o.getAttribute("data-state")==="open";o.setAttribute("data-state",r?"closed":"open"),s.toggleAll(!r)}))}})};a();document.addEventListener("astro:after-swap",a);
