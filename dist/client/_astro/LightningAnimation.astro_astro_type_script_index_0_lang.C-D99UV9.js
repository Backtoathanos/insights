const G=Math.sqrt(3),O=.5*(G-1),A=(3-G)/6,L=t=>0|Math.floor(t),E=new Float64Array([1,1,-1,1,1,-1,-1,-1,1,0,-1,0,1,0,-1,0,0,1,0,-1,0,1,0,-1]);function X(t=Math.random){const i=Y(t),e=new Float64Array(i).map((t=>E[t%12*2])),s=new Float64Array(i).map((t=>E[t%12*2+1]));return function(t,n){let h=0,r=0,o=0;const a=(t+n)*O,l=L(t+a),u=L(n+a),d=(l+u)*A,c=t-(l-d),p=n-(u-d);let f,g;c>p?(f=1,g=0):(f=0,g=1);const y=c-f+A,m=p-g+A,w=c-1+2*A,x=p-1+2*A,S=255&l,b=255&u;let v=.5-c*c-p*p;if(v>=0){const t=S+i[b];v*=v,h=v*v*(e[t]*c+s[t]*p)}let _=.5-y*y-m*m;if(_>=0){const t=S+f+i[b+g];_*=_,r=_*_*(e[t]*y+s[t]*m)}let C=.5-w*w-x*x;if(C>=0){const t=S+1+i[b+1];C*=C,o=C*C*(e[t]*w+s[t]*x)}return 70*(h+r+o)}}function Y(t){const i=new Uint8Array(512);for(let t=0;t<256;t++)i[t]=t;for(let e=0;e<255;e++){const s=e+~~(t()*(256-e)),n=i[e];i[e]=i[s],i[s]=n}for(let t=256;t<512;t++)i[t]=i[t-256];return i}const g={color:"hsl(0, 0%, 100%)",arcSpeed:.02,amplitude:1.5,lineWidth:4,blur:60,blurColor:"hsl(217, 91%, 60%)",childNum:2,inset:65,circleSpeed:.003};function l(t,i){this.x=t||0,this.y=i||0}function j(t,i,e){l.call(this,t,i),this.radius=e||7,this.vec=new l(C(1,-1),C(1,-1)).normalize(),this._easeRadius=this.radius,this._currentRadius=this.radius}function N(t,i,e){this.startPoint=t||new l,this.endPoint=i||new l,this.step=e||35,this.children=[]}function Q(t,i,e,s){const n=g.inset;this.x=(void 0!==t?t:0)+n,this.y=(void 0!==i?i:0)+n,this.width=(void 0!==e?e:0)-2*n,this.height=(void 0!==s?s:0)-2*n,this.right=this.x+this.width,this.bottom=this.y+this.height}function C(t,i){return"number"!=typeof t?Math.random():("number"!=typeof i&&(i=0),Math.random()*(t-i)+i)}function I(t,i){return t?0|C(t+1,i):0}function k(){var t,i,e,s,n,h,r,o;function a(){if(!t)return;const a=t.getBoundingClientRect();t.width=a.width,t.height=a.height,e=.5*t.width,s=.5*t.height,i=t.getContext("2d");const u=t.width/2-g.inset;h=new Q(0,0,t.width,t.height),n=new l,o=new N,r=[new j(e-u,s,1.25*o.lineWidth),new j(e+u,s,1.25*o.lineWidth)],o.startPoint.set(r[0]),o.endPoint.set(r[1]),o.setChildNum(g.childNum)}t=document.getElementById("lightning"),window.addEventListener("resize",a,!1),a();var u=function(){if(t){var e,s,a;for(i.save(),i.fillStyle=undefined,i.clearRect(0,0,t.width,t.height),i.restore(),o.startPoint.set(r[0]),o.endPoint.set(r[1]),o.step=Math.ceil(o.length()/10),o.step<5&&(o.step=5),o.update(),o.draw(i),a=r[0].distanceTo(r[1]).toFixed(0),e=0;e<2;e++)(s=r[e]).dragging&&s.drag(n),s.update(r,h,a/2),s.draw(i);requestAnimationFrame(u)}};u()}window.requestAnimationFrame=window.requestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},l.add=function(t,i){return new l(t.x+i.x,t.y+i.y)},l.sub=function(t,i){return new l(t.x-i.x,t.y-i.y)},l.prototype={set:function(t,i){return"object"==typeof t&&(i=t.y,t=t.x),this.x=t||0,this.y=i||0,this},add:function(t){return this.x+=t.x,this.y+=t.y,this},sub:function(t){return this.x-=t.x,this.y-=t.y,this},scale:function(t){return this.x*=t,this.y*=t,this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){var t=Math.sqrt(this.x*this.x+this.y*this.y);return t&&(this.x/=t,this.y/=t),this},angle:function(){return Math.atan2(this.y,this.x)},distanceTo:function(t){var i=t.x-this.x,e=t.y-this.y;return Math.sqrt(i*i+e*e)},distanceToSq:function(t){var i=t.x-this.x,e=t.y-this.y;return i*i+e*e},clone:function(){return new l(this.x,this.y)}},j.prototype=function(t){var i,e=new l(0,0);for(i in t)e[i]=t[i];return e}({color:g.color,dragging:!1,_latestDrag:null,update:function(t,i,e){if(this._currentRadius=C(this._easeRadius,.35*this._easeRadius),this._easeRadius+=.1*(this.radius-this._easeRadius),!this.dragging){this.vec;{const t=i.x+.5*i.width,s=i.y+.5*i.height,n=Math.atan2(this.y-s,this.x-t)+g.circleSpeed;this.x=t+Math.cos(n)*e,this.y=s+Math.sin(n)*e}}},hitTest:function(t){return this.distanceToSq(t)<900&&(this._easeRadius=2.5*this.radius,!0)},startDrag:function(){this.dragging=!0,this.vec.set(0,0),this._latestDrag=(new l).set(this)},drag:function(t){this._latestDrag.set(this),this.set(t)},endDrag:function(){this.vec=l.sub(this,this._latestDrag),this.dragging=!1},draw:function(t){t.save(),t.fillStyle=this.color,t.beginPath(),t.arc(this.x,this.y,this._currentRadius,0,2*Math.PI,!1),t.fill(),t.shadowBlur=20,t.shadowColor=this.color,t.fillStyle="rgba(0, 0, 0, 1)",t.globalCompositeOperation="lighter",t.beginPath(),t.arc(this.x,this.y,this._currentRadius,0,2*Math.PI,!1),t.fill(),t.restore()}}),N.prototype={color:g.color,arcSpeed:g.arcSpeed,amplitude:g.amplitude,lineWidth:g.lineWidth,blur:g.blur,blurColor:g.blurColor,points:null,off:0,_simplexNoise:X(),parent:null,startStep:0,endStep:0,length:function(){return this.startPoint.distanceTo(this.endPoint)},getChildNum:function(){return this.children.length},setChildNum:function(t){var i,e,s,n=this.children;if((s=this.children.length)>t){for(e=t;e<s;e++)n[e].dispose();n.splice(t,s-t)}else for(e=s;e<t;e++)(i=new N)._setAsChild(this),n.push(i)},update:function(){var t,i,e,s,n,h,r,o,a,u,d,c,p,f,g,y,m,w,x,S,b,v,_=this.startPoint,P=this.endPoint;for(this.parent&&(this.endStep>this.parent.step&&this._updateStepsByParent(),_.set(this.parent.points[this.startStep]),P.set(this.parent.points[this.endStep])),t=this.length(),e=(i=l.sub(P,_).normalize().scale(t/this.step)).angle(),s=Math.sin(e),n=Math.cos(e),h=this.points=[],r=this.off+=C(this.arcSpeed,.2*this.arcSpeed),(o=(this.parent?1.5*t:t)*this.amplitude)>750&&(o=750),b=0,v=this.step+1;b<v;b++)a=b/60,d=s*(u=o*this._noise(a-r,0)*.5),c=n*u,f=s*(p=o*this._noise(a+r,0)*.5),g=n*p,y=Math.sin(Math.PI*(b/(v-1))),m=_.x+i.x*b+(d-f)*y,w=_.y+i.y*b-(c-g)*y,h.push(new l(m,w));for(b=0,v=(x=this.children).length;b<v;b++)(S=x[b]).color=this.color,S.arcSpeed=1.35*this.arcSpeed,S.amplitude=this.amplitude,S.lineWidth=.75*this.lineWidth,S.blur=this.blur,S.blurColor=this.blurColor,x[b].update()},draw:function(t){var i,e,s,n,h=this.points,r=this.children;if(this.blur){for(t.save(),t.globalCompositeOperation="lighter",t.fillStyle="rgba(0, 0, 0, 1)",t.shadowBlur=this.blur,t.shadowColor=this.blurColor,t.beginPath(),i=0,e=h.length;i<e;i++)s=h[i],n=e>1?s.distanceTo(h[i===e-1?i-1:i+1]):0,t.moveTo(s.x+n,s.y),t.arc(s.x,s.y,n,0,2*Math.PI,!1);t.fill(),t.restore()}for(t.save(),t.lineWidth=C(this.lineWidth,.5),t.strokeStyle=this.color,t.beginPath(),i=0,e=h.length;i<e;i++)s=h[i],t[0===i?"moveTo":"lineTo"](s.x,s.y);for(t.stroke(),t.restore(),i=0,e=this.children.length;i<e;i++)r[i].draw(t)},dispose:function(){this._timeoutId&&clearTimeout(this._timeoutId),this._simplexNoise=null},_noise:function(t){var i,e=1,s=1,n=0;for(i=0;i<6;++i)n+=(e*=.5)*(this._simplexNoise(t*s,0)+1)*.5,s*=2;return n},_setAsChild:function(t){if(t instanceof N){this.parent=t;var i=this,e=function(){i._updateStepsByParent(),i._timeoutId=setTimeout(e,I(1500))};i._timeoutId=setTimeout(e,I(1500))}},_updateStepsByParent:function(){if(this.parent){var t=this.parent.step;this.startStep=I(t-2),this.endStep=this.startStep+I(t-this.startStep-2)+2,this.step=this.endStep-this.startStep}}},setTimeout(k,1e3),document.addEventListener("astro:after-swap",k);